<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Анатомия Сети: Интерактивная Лекция</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cyber: {
                            black: '#050505',
                            dark: '#121212',
                            gray: '#1a1a1a',
                            light: '#e0e0e0',
                            neon: '#deff9a',
                            alert: '#ff6b6b',
                            dim: '#bbbbbb',
                            blue: '#4cc9f0'
                        }
                    },
                    fontFamily: {
                        sans: ['Urbanist', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        /* Hide Scrollbar */
        body::-webkit-scrollbar { display: none; }
        body { -ms-overflow-style: none; scrollbar-width: none; overflow: hidden; background-color: #050505; color: #e0e0e0; }

        .slide {
            height: 100vh;
            width: 100vw;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            opacity: 0;
            pointer-events: none;
            z-index: 0;
            background-color: #050505; /* Fallback */
        }

        .slide.active { opacity: 1; pointer-events: auto; z-index: 10; }
        .slide.prev { transform: translateY(-100%); opacity: 0; }
        .slide.next { transform: translateY(100%); opacity: 0; }

        .chart-container { position: relative; width: 100%; max-width: 600px; height: 300px; margin: 0 auto; }
        .nav-btn { backdrop-filter: blur(5px); transition: all 0.3s ease; cursor: pointer; }
        .nav-btn:hover { background-color: rgba(222, 255, 154, 0.2); color: #deff9a; }
        
        /* Slide Number Style */
        .slide-number {
            position: absolute;
            bottom: 2rem;
            left: 2rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            color: #444;
            pointer-events: none;
        }
        .slide.active .slide-number {
            color: #deff9a;
            transition: color 1s ease;
        }

        /* Specific OSI Styles */
        .osi-card {
            transition: all 0.3s ease;
        }
        .osi-card:hover {
            border-color: rgba(222, 255, 154, 0.3);
            background-color: rgba(255, 255, 255, 0.03);
        }
        
        .osi-btn {
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-cyber-black text-cyber-light font-sans selection:bg-cyber-neon selection:text-cyber-black">

    <!-- Progress Bar (Top) -->
    <div class="fixed top-0 left-0 w-full h-1 bg-cyber-gray z-50">
        <div id="progress-bar" class="h-full bg-cyber-neon transition-all duration-300" style="width: 0%"></div>
    </div>

    <!-- ================= SLIDES ================= -->

    <!-- SLIDE 0: Title (No Number) -->
    <section class="slide active bg-cyber-black" id="slide-0">
        <div class="absolute inset-0 z-0 opacity-20 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-cyber-neon/20 via-transparent to-transparent"></div>
        <div class="z-10 text-center max-w-4xl">
            <div class="mb-6 inline-block px-4 py-1 border border-cyber-neon rounded-full text-cyber-neon text-sm uppercase tracking-widest">
                Лекция / Семинар
            </div>
            <h1 class="text-6xl md:text-8xl font-bold mb-6 leading-tight">
                Анатомия <span class="text-cyber-neon">Сети</span>
            </h1>
            <p class="text-2xl text-cyber-dim mb-12">
                Как работает интернет, где живут уязвимости, и как государство контролирует трафик.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-left">
                <div class="p-4 border border-white/10 rounded-lg bg-white/5 backdrop-blur-sm hover:border-cyber-neon/50 transition-colors">
                    <i class="fa-solid fa-layer-group text-cyber-neon text-2xl mb-2"></i>
                    <h3 class="font-bold text-lg">База (OSI)</h3>
                    <p class="text-sm text-gray-400">От кабеля до браузера</p>
                </div>
                <div class="p-4 border border-white/10 rounded-lg bg-white/5 backdrop-blur-sm hover:border-cyber-alert/50 transition-colors">
                    <i class="fa-solid fa-user-secret text-cyber-alert text-2xl mb-2"></i>
                    <h3 class="font-bold text-lg">Угрозы</h3>
                    <p class="text-sm text-gray-400">Wi-Fi, 2G, СОРМ</p>
                </div>
                <div class="p-4 border border-white/10 rounded-lg bg-white/5 backdrop-blur-sm hover:border-cyber-alert/50 transition-colors">
                    <i class="fa-solid fa-ban text-cyber-alert text-2xl mb-2"></i>
                    <h3 class="font-bold text-lg">Цензура</h3>
                    <p class="text-sm text-gray-400">ТСПУ и замедление</p>
                </div>
            </div>
            <p class="mt-12 text-sm text-gray-500 font-mono animate-pulse">Нажмите ↓ или Пробел для начала</p>
        </div>
    </section>

    <!-- SLIDE 1: OSI Model Interactive -->
    <section class="slide bg-cyber-dark" id="slide-1">
        <div class="slide-number">01</div>
        <div class="w-full max-w-7xl h-full flex flex-col justify-center">
            <h2 class="text-4xl font-bold mb-8 text-cyber-neon border-l-4 border-cyber-neon pl-4">Модель OSI: Полный Разбор</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-12 gap-6 h-[75vh]">
                <!-- Layer Navigation (Left) -->
                <div class="md:col-span-3 flex flex-col-reverse gap-2 h-full overflow-y-auto">
                    <button onclick="setOsiLayer(1)" id="osi-btn-1" class="osi-btn p-3 border border-white/20 rounded hover:bg-white/10 text-left transition-all flex justify-between items-center group">
                        <span class="font-mono font-bold text-lg">1. Физический</span>
                        <i class="fa-solid fa-network-wired opacity-50 group-hover:opacity-100"></i>
                    </button>
                    <button onclick="setOsiLayer(2)" id="osi-btn-2" class="osi-btn p-3 border border-white/20 rounded hover:bg-white/10 text-left transition-all flex justify-between items-center group">
                        <span class="font-mono font-bold text-lg">2. Канальный</span>
                        <i class="fa-solid fa-ethernet opacity-50 group-hover:opacity-100"></i>
                    </button>
                    <button onclick="setOsiLayer(3)" id="osi-btn-3" class="osi-btn p-3 border border-white/20 rounded hover:bg-white/10 text-left transition-all flex justify-between items-center group">
                        <span class="font-mono font-bold text-lg">3. Сетевой</span>
                        <i class="fa-solid fa-globe opacity-50 group-hover:opacity-100"></i>
                    </button>
                    <button onclick="setOsiLayer(4)" id="osi-btn-4" class="osi-btn p-3 border border-white/20 rounded hover:bg-white/10 text-left transition-all flex justify-between items-center group">
                        <span class="font-mono font-bold text-lg">4. Транспортный</span>
                        <i class="fa-solid fa-truck-fast opacity-50 group-hover:opacity-100"></i>
                    </button>
                    <button onclick="setOsiLayer(5)" id="osi-btn-5" class="osi-btn p-3 border border-white/20 rounded hover:bg-white/10 text-left transition-all flex justify-between items-center group">
                        <span class="font-mono font-bold text-lg">5. Сеансовый</span>
                        <i class="fa-solid fa-handshake opacity-50 group-hover:opacity-100"></i>
                    </button>
                    <button onclick="setOsiLayer(6)" id="osi-btn-6" class="osi-btn p-3 border border-white/20 rounded hover:bg-white/10 text-left transition-all flex justify-between items-center group">
                        <span class="font-mono font-bold text-lg">6. Представительский</span>
                        <i class="fa-solid fa-language opacity-50 group-hover:opacity-100"></i>
                    </button>
                    <button onclick="setOsiLayer(7)" id="osi-btn-7" class="osi-btn p-3 border border-white/20 rounded hover:bg-white/10 text-left transition-all flex justify-between items-center group">
                        <span class="font-mono font-bold text-lg">7. Прикладной</span>
                        <i class="fa-brands fa-chrome opacity-50 group-hover:opacity-100"></i>
                    </button>
                </div>

                <!-- Info Panel (Right) -->
                <div class="md:col-span-9 bg-cyber-gray border border-white/10 rounded-xl p-6 flex flex-col relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-4 opacity-10">
                        <i id="osi-big-icon" class="fa-solid fa-network-wired text-9xl"></i>
                    </div>
                    
                    <!-- Header -->
                    <div class="mb-6 relative z-10">
                        <div class="flex items-end gap-4">
                            <span id="osi-layer-num" class="text-5xl font-bold text-cyber-neon font-mono leading-none">L1</span>
                            <div>
                                <h3 id="osi-title" class="text-3xl font-bold text-white leading-none">Physical Layer</h3>
                                <p id="osi-desc" class="text-white mt-2 text-lg">Физическая среда передачи сигналов.</p>
                            </div>
                        </div>
                        <div class="mt-4 inline-block bg-black/40 px-3 py-1 rounded border border-white/10">
                             <span class="text-gray-400 font-mono text-sm">Технологии: <span id="osi-tech" class="text-cyber-blue font-bold">Витая пара, Wi-Fi</span></span>
                        </div>
                    </div>

                    <!-- Columns -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 h-full relative z-10">
                        <!-- Left: Analogy -->
                        <div class="osi-card bg-black/30 p-5 rounded-lg border border-white/5 flex flex-col">
                            <h4 class="text-cyber-neon font-bold mb-3 flex items-center gap-2 border-b border-white/10 pb-2">
                                <i class="fa-solid fa-envelope"></i> Как работает почта?
                            </h4>
                            <p id="osi-analogy" class="text-gray-200 text-lg leading-relaxed flex-grow">
                                Грузовик.
                            </p>
                        </div>
                        
                        <!-- Right: Threats -->
                        <div class="osi-card bg-black/30 p-5 rounded-lg border border-white/5 flex flex-col">
                            <h4 class="text-cyber-alert font-bold mb-3 flex items-center gap-2 border-b border-white/10 pb-2">
                                <i class="fa-solid fa-triangle-exclamation"></i> Уязвимости
                            </h4>
                            
                            <div class="mb-4">
                                <p class="text-xs text-gray-500 uppercase tracking-widest mb-1">Почтовая аналогия атаки</p>
                                <p id="osi-threat-analogy" class="text-white italic bg-cyber-alert/10 p-2 rounded border-l-2 border-cyber-alert">
                                    Взрыв моста.
                                </p>
                            </div>

                            <div>
                                <p class="text-xs text-gray-500 uppercase tracking-widest mb-1">Реальные атаки</p>
                                <ul id="osi-threats" class="list-disc pl-5 space-y-1 text-gray-300 text-sm">
                                    <li>Обрыв кабеля</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Footer Info -->
                    <div class="mt-auto pt-4 border-t border-white/10 flex justify-between items-center text-xs font-mono text-gray-500">
                         <span>PDU (Блок данных): <span id="osi-pdu" class="text-white">Бит</span></span>
                         <span>Железо: <span id="osi-hw" class="text-white">Концентратор</span></span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SLIDE 2: Wireless Threats -->
    <section class="slide bg-cyber-black" id="slide-2">
        <div class="slide-number">02</div>
        <div class="w-full max-w-6xl">
            <h2 class="text-4xl font-bold mb-10 text-cyber-neon border-l-4 border-cyber-neon pl-4">Беспроводные Угрозы</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <!-- 2G/Mobile -->
                <div class="bg-cyber-gray p-8 rounded-xl border border-white/10">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 rounded-full bg-cyber-alert/20 flex items-center justify-center text-cyber-alert text-2xl">
                            <i class="fa-solid fa-tower-cell"></i>
                        </div>
                        <h3 class="text-2xl font-bold">Мобильные сети (2G/SS7)</h3>
                    </div>
                    <ul class="space-y-4">
                        <li class="bg-black/40 p-4 rounded border-l-2 border-cyber-alert">
                            <strong class="text-white block mb-1">Downgrade Attack</strong>
                            <span class="text-sm text-gray-400">Телефон принудительно переключают с защищенного LTE на старый 2G, где нет шифрования.</span>
                        </li>
                        <li class="bg-black/40 p-4 rounded border-l-2 border-cyber-alert">
                            <strong class="text-white block mb-1">IMSI Catcher (Stingray)</strong>
                            <span class="text-sm text-gray-400">Ложная базовая станция. Телефон подключается к ней, так как сигнал сильнее, и хакер перехватывает трафик.</span>
                        </li>
                        <li class="bg-black/40 p-4 rounded border-l-2 border-cyber-alert">
                            <strong class="text-white block mb-1">SS7 Уязвимость</strong>
                            <span class="text-sm text-gray-400">Протокол SS7 доверяет любому узлу. Зная номер, хакер может перехватить SMS с кодом банка.</span>
                        </li>
                    </ul>
                </div>

                <!-- Wi-Fi -->
                <div class="bg-cyber-gray p-8 rounded-xl border border-white/10">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center text-yellow-500 text-2xl">
                            <i class="fa-solid fa-wifi"></i>
                        </div>
                        <h3 class="text-2xl font-bold">Публичный Wi-Fi</h3>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="relative group">
                            <div class="absolute inset-0 bg-yellow-500/10 blur rounded-lg"></div>
                            <div class="relative bg-black/50 p-6 rounded-lg border border-yellow-500/30">
                                <h4 class="font-bold text-lg mb-2">Man-in-the-Middle (MitM)</h4>
                                <p class="text-sm text-gray-400 mb-4">
                                    Атакующий создает точку "Free_Coffee_Wifi". Вы подключаетесь. Весь ваш трафик идет через ноутбук хакера.
                                </p>
                                <div class="flex justify-between items-center text-xs font-mono text-gray-500 bg-black p-2 rounded">
                                    <span>Вы (Victim)</span>
                                    <i class="fa-solid fa-arrow-right text-red-500 animate-pulse"></i>
                                    <span class="text-red-500">Хакер</span>
                                    <i class="fa-solid fa-arrow-right text-red-500 animate-pulse"></i>
                                    <span>Интернет</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-black/40 p-4 rounded border-l-2 border-yellow-500">
                             <strong class="text-white block mb-1">Совет:</strong>
                             <span class="text-sm text-gray-400">В кафе и отелях ВСЕГДА включайте VPN. Это создает зашифрованный туннель внутри ненадежной сети Wi-Fi.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SLIDE 3: SORM & Censorship -->
    <section class="slide bg-cyber-dark" id="slide-3">
        <div class="slide-number">03</div>
        <div class="w-full max-w-6xl">
            <h2 class="text-4xl font-bold mb-8 text-cyber-neon border-l-4 border-cyber-neon pl-4">Госслежка и Цензура в РФ</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
                <!-- Text Content -->
                <div class="md:col-span-7 space-y-6">
                    <div class="bg-cyber-gray p-6 rounded-xl border border-white/10">
                        <h3 class="text-xl font-bold text-white mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-server text-blue-400"></i> СОРМ (1, 2, 3)
                        </h3>
                        <p class="text-gray-400 text-sm mb-4">
                            "Система Оперативно-Розыскных Мероприятий". Черный ящик у провайдера, зеркалирующий трафик.
                        </p>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div class="bg-black/30 p-2 rounded"><span class="text-blue-400 font-bold">СОРМ-1:</span> Телефон/Голос</div>
                            <div class="bg-black/30 p-2 rounded"><span class="text-blue-400 font-bold">СОРМ-2:</span> Интернет-трафик</div>
                            <div class="bg-black/30 p-2 rounded col-span-2"><span class="text-blue-400 font-bold">СОРМ-3:</span> Долгосрочное хранение (Биг Дата)</div>
                        </div>
                    </div>

                    <div class="bg-cyber-gray p-6 rounded-xl border border-white/10">
                        <h3 class="text-xl font-bold text-white mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-microchip text-red-500"></i> ТСПУ и "Суверенный Рунет"
                        </h3>
                        <p class="text-gray-400 text-sm mb-4">
                            <strong>ТСПУ</strong> (Тех. средства противодействия угрозам) — оборудование РКН на узлах связи. Позволяет замедлять или блокировать протоколы.
                        </p>
                        <ul class="space-y-2 text-sm text-gray-300">
                            <li><i class="fa-solid fa-ban text-red-500 w-6"></i> <strong>Замедление YouTube:</strong> DPI определяет видео-поток и отбрасывает часть пакетов.</li>
                            <li><i class="fa-solid fa-phone-slash text-red-500 w-6"></i> <strong>Блок звонков:</strong> Блокировка WhatsApp/Telegram звонков по сигнатуре протокола (UDP/DTLS).</li>
                            <li><i class="fa-solid fa-list-check text-green-500 w-6"></i> <strong>Белые списки:</strong> Концепция "Запрещено все, кроме разрешенного" (Интранет).</li>
                        </ul>
                    </div>
                </div>

                <!-- Visualization -->
                <div class="md:col-span-5 flex flex-col items-center justify-center bg-cyber-gray p-6 rounded-xl border border-white/10">
                    <h4 class="mb-4 font-bold text-gray-300">Эффект замедления (Throttling)</h4>
                    <div class="chart-container">
                        <canvas id="censorshipChart"></canvas>
                    </div>
                    <p class="mt-4 text-xs text-gray-500 text-center">
                        График демонстрирует падение скорости загрузки (Bitrate) при активации ТСПУ для сервисов типа YouTube.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- SLIDE 4: Digital Hygiene & Conclusion -->
    <section class="slide bg-cyber-dark" id="slide-4">
        <div class="slide-number">04</div>
        <div class="w-full max-w-5xl">
            <h2 class="text-4xl font-bold mb-10 text-cyber-neon border-l-4 border-cyber-neon pl-4">Цифровая Гигиена: Что делать?</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-4">
                    <div class="bg-cyber-gray p-5 rounded-lg flex items-start gap-4">
                        <i class="fa-solid fa-lock text-cyber-neon text-xl mt-1"></i>
                        <div>
                            <h4 class="font-bold text-white">DNS over HTTPS (DoH)</h4>
                            <p class="text-sm text-gray-400">Включите в браузере. Это скроет список посещаемых доменов от провайдера и СОРМ.</p>
                        </div>
                    </div>
                    
                    <div class="bg-cyber-gray p-5 rounded-lg flex items-start gap-4">
                        <i class="fa-solid fa-shield-halved text-cyber-neon text-xl mt-1"></i>
                        <div>
                            <h4 class="font-bold text-white">VPN (Проверенный)</h4>
                            <p class="text-sm text-gray-400">Переносит доверие от майора ФСБ к админу сервера в Нидерландах. Не панацея, но защита от локального наблюдения.</p>
                        </div>
                    </div>

                    <div class="bg-cyber-gray p-5 rounded-lg flex items-start gap-4">
                        <i class="fa-brands fa-signal-messenger text-cyber-neon text-xl mt-1"></i>
                        <div>
                            <h4 class="font-bold text-white">Мессенджеры</h4>
                            <p class="text-sm text-gray-400">Обычный чат Telegram не шифруется E2E! Используйте "Секретные чаты" или Signal для чувствительных тем.</p>
                        </div>
                    </div>
                </div>

                <div class="bg-black/30 p-8 rounded-xl border border-cyber-neon/30 flex flex-col justify-center items-center text-center">
                    <i class="fa-regular fa-circle-question text-6xl text-cyber-dim mb-6"></i>
                    <h3 class="text-3xl font-bold text-white mb-4">Вопросы?</h3>
                    <p class="text-gray-400 mb-8">
                        Безопасность — это не продукт, это процесс.
                    </p>
                    <button onclick="currentSlide = 0; updateSlides();" class="px-6 py-2 bg-cyber-neon text-cyber-black font-bold rounded hover:bg-white transition-colors">
                        В начало
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- JavaScript Logic -->
    <script>
        // --- State Management ---
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        const progressBar = document.getElementById('progress-bar');

        // --- Navigation Logic ---
        function updateSlides() {
            slides.forEach((slide, index) => {
                slide.classList.remove('active', 'prev', 'next');
                if (index === currentSlide) {
                    slide.classList.add('active');
                } else if (index < currentSlide) {
                    slide.classList.add('prev');
                } else {
                    slide.classList.add('next');
                }
            });
            
            // Update Progress Bar
            const progress = ((currentSlide) / (totalSlides - 1)) * 100;
            progressBar.style.width = `${progress}%`;
        }

        function changeSlide(direction) {
            const newIndex = currentSlide + direction;
            if (newIndex >= 0 && newIndex < totalSlides) {
                currentSlide = newIndex;
                updateSlides();
            }
        }

        // Keyboard Controls
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowDown' || e.key === 'ArrowRight' || e.code === 'Space') {
                changeSlide(1);
            } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
                changeSlide(-1);
            }
        });

        // Initialize First Slide
        updateSlides();


        // --- OSI Interactive Model Logic ---
        // UPDATED: Technologies per layer and Threat Analogies added
        const osiData = {
            1: {
                title: "Physical (Физический)",
                desc: "Передача битов через физическую среду.",
                tech: "Витая пара (RJ-45), Оптоволокно, Wi-Fi (802.11 - Радиоволны)",
                pdu: "Бит (Bit)",
                hw: "Концентратор (Hub), Кабели, Антенны",
                analogy: "Дорога и сам грузовик. Если дорога разрушена или колесо спущено, груз никуда не поедет. Водитель просто давит на газ, он не знает, что в кузове.",
                threats: ["Обрыв кабеля", "Глушилки сигнала", "Прослушка излучения"],
                threat_analogy: "Взрыв моста или угон грузовика."
            },
            2: {
                title: "Data Link (Канальный)",
                desc: "Физическая адресация в пределах одной сети.",
                tech: "Ethernet, MAC-адреса, ARP, PPP",
                pdu: "Кадр (Frame)",
                hw: "Коммутатор (Switch), Сетевая карта (NIC)",
                analogy: "Сортировочный центр внутри офисного здания. Письма раскладывают по ячейкам сотрудников (MAC-адрес). Работает только внутри одного здания.",
                threats: ["MAC Spoofing", "ARP Poisoning"],
                threat_analogy: "Мошенник надел бейдж почтальона и забирает письма из ячеек коллег."
            },
            3: {
                title: "Network (Сетевой)",
                desc: "Логическая адресация и выбор маршрута по миру.",
                tech: "IP (IPv4, IPv6), ICMP, IPsec",
                pdu: "Пакет (Packet)",
                hw: "Маршрутизатор (Router)",
                analogy: "Глобальная система адресов (Индекс, Город, Улица). На конверте написан адрес получателя. Маршрутизаторы — это перевалочные пункты, решающие, куда везти письмо дальше.",
                threats: ["IP Spoofing", "Man-in-the-Middle"],
                threat_analogy: "Кто-то подменил дорожные знаки, и грузовик уехал в другой город."
            },
            4: {
                title: "Transport (Транспортный)",
                desc: "Надежность доставки и разделение потоков.",
                tech: "TCP, UDP, Порты",
                pdu: "Сегмент (Segment)",
                hw: "Брандмауэр (Firewall), Шлюз",
                analogy: "Тип отправления. TCP — заказное письмо с распиской о получении (надежно, но медленно). UDP — открытка (быстро, но может потеряться). Порт — это имя конкретного человека в квартире.",
                threats: ["Сканирование портов", "SYN Flood (DDoS)"],
                threat_analogy: "Почтовый ящик забили макулатурой так, что полезные письма не влезают (DDoS)."
            },
            5: {
                title: "Session (Сеансовый)",
                desc: "Управление диалогом между устройствами.",
                tech: "RPC, PAP, Sockets, NetBIOS",
                pdu: "Данные",
                hw: "Шлюзы",
                analogy: "Телефонный звонок секретарю. 'Алло, Иван Иванович на месте? Соедините'. Установка связи, удержание линии и завершение разговора.",
                threats: ["Session Hijacking"],
                threat_analogy: "Злоумышленник ворвался в кабинет посередине разговора и притворился вами."
            },
            6: {
                title: "Presentation (Представления)",
                desc: "Преобразование форматов и шифрование.",
                tech: "SSL/TLS, ASCII, JPEG, MPEG",
                pdu: "Данные",
                hw: "Шлюзы",
                analogy: "Переводчик. Если письмо на китайском, его надо перевести на русский. Здесь же происходит запечатывание письма в непрозрачный конверт (шифрование), чтобы почтальон не прочитал.",
                threats: ["SSL Stripping", "Malware encoding"],
                threat_analogy: "Письмо вскрыли над паром, прочитали и заклеили обратно (или переводчик соврал)."
            },
            7: {
                title: "Application (Прикладной)",
                desc: "Интерфейс для взаимодействия с пользователем.",
                tech: "HTTP(S), DNS, SMTP, FTP, SSH",
                pdu: "Данные",
                hw: "Компьютер, Смартфон, Сервер",
                analogy: "Сам текст письма и его смысл. То, что вы пишете и читаете. Картинки, текст, ссылки, кнопки в браузере.",
                threats: ["Фишинг", "SQL-инъекции", "Вирусы"],
                threat_analogy: "В письме лежал белый порошок (вирус) или просьба срочно выслать денег мошеннику (фишинг)."
            }
        };

        function setOsiLayer(layerNum) {
            // UI Update
            document.querySelectorAll('.osi-btn').forEach(btn => {
                btn.classList.remove('bg-cyber-neon/20', 'border-cyber-neon');
                btn.classList.add('border-white/20');
            });
            const activeBtn = document.getElementById(`osi-btn-${layerNum}`);
            activeBtn.classList.remove('border-white/20');
            activeBtn.classList.add('bg-cyber-neon/20', 'border-cyber-neon');

            // Content Update
            const data = osiData[layerNum];
            document.getElementById('osi-layer-num').innerText = `L${layerNum}`;
            document.getElementById('osi-title').innerText = data.title;
            document.getElementById('osi-desc').innerText = data.desc;
            document.getElementById('osi-tech').innerText = data.tech;
            document.getElementById('osi-pdu').innerText = data.pdu;
            document.getElementById('osi-hw').innerText = data.hw;
            document.getElementById('osi-analogy').innerText = data.analogy;
            document.getElementById('osi-threat-analogy').innerText = data.threat_analogy;
            
            // Threats Update
            const threatsList = document.getElementById('osi-threats');
            threatsList.innerHTML = '';
            data.threats.forEach(threat => {
                const li = document.createElement('li');
                li.innerText = threat;
                threatsList.appendChild(li);
            });
        }
        
        // Init OSI Layer 1
        setOsiLayer(7);


        // --- Chart.js Initialization ---
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('censorshipChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['00:00', '00:10', '00:20', '00:30', '00:40', '00:50', '01:00'],
                    datasets: [
                        {
                            label: 'Normal Traffic',
                            data: [100, 98, 100, 102, 99, 100, 101],
                            borderColor: '#888888',
                            borderDash: [5, 5],
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Throttled (YouTube)',
                            data: [100, 95, 45, 30, 25, 30, 28], // Drop representing DPI intervention
                            borderColor: '#ff6b6b',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#e0e0e0' } },
                        tooltip: { mode: 'index', intersect: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#bbbbbb', callback: function(value) { return value + ' Mbps'; } }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#bbbbbb' }
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        });
    </script>
</body>
</html>